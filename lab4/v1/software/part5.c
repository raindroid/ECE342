#include <stdio.h>
#include <stdbool.h>
#include <stdlib.h>
#include "funcs.h"
#include "parts.h"

static const int P5_X[360] = {
    [0]         = 188, 187, 187, 187, 187, 187, 187, 187, 187, 187, 187, 187, 187, 187, 187, 187, 187, 187, 187, 186,
    [20]        = 186, 186, 186, 186, 186, 186, 185, 185, 185, 185, 185, 185, 184, 184, 184, 184, 184, 183, 183, 183,
    [40]        = 183, 183, 182, 182, 182, 182, 181, 181, 181, 181, 180, 180, 180, 180, 179, 179, 179, 178, 178, 178,
    [60]        = 178, 177, 177, 177, 176, 176, 176, 175, 175, 175, 174, 174, 174, 173, 173, 173, 172, 172, 172, 171,
    [80]        = 171, 171, 170, 170, 170, 169, 169, 169, 168, 168, 168, 167, 167, 166, 166, 166, 165, 165, 165, 164,
    [100]       = 164, 164, 163, 163, 163, 162, 162, 162, 161, 161, 161, 160, 160, 160, 159, 159, 159, 158, 158, 158,
    [120]       = 158, 157, 157, 157, 156, 156, 156, 155, 155, 155, 155, 154, 154, 154, 154, 153, 153, 153, 153, 152,
    [140]       = 152, 152, 152, 152, 151, 151, 151, 151, 151, 150, 150, 150, 150, 150, 150, 149, 149, 149, 149, 149,
    [160]       = 149, 149, 148, 148, 148, 148, 148, 148, 148, 148, 148, 148, 148, 148, 148, 148, 148, 148, 148, 148,
    [180]       = 148, 148, 148, 148, 148, 148, 148, 148, 148, 148, 148, 148, 148, 148, 148, 148, 148, 148, 148, 149,
    [200]       = 149, 149, 149, 149, 149, 149, 150, 150, 150, 150, 150, 150, 151, 151, 151, 151, 151, 152, 152, 152,
    [220]       = 152, 152, 153, 153, 153, 153, 154, 154, 154, 154, 155, 155, 155, 155, 156, 156, 156, 157, 157, 157,
    [240]       = 158, 158, 158, 158, 159, 159, 159, 160, 160, 160, 161, 161, 161, 162, 162, 162, 163, 163, 163, 164,
    [260]       = 164, 164, 165, 165, 165, 166, 166, 166, 167, 167, 168, 168, 168, 169, 169, 169, 170, 170, 170, 171,
    [280]       = 171, 171, 172, 172, 172, 173, 173, 173, 174, 174, 174, 175, 175, 175, 176, 176, 176, 177, 177, 177,
    [300]       = 178, 178, 178, 178, 179, 179, 179, 180, 180, 180, 180, 181, 181, 181, 181, 182, 182, 182, 182, 183,
    [320]       = 183, 183, 183, 183, 184, 184, 184, 184, 184, 185, 185, 185, 185, 185, 185, 186, 186, 186, 186, 186,
    [340]       = 186, 186, 187, 187, 187, 187, 187, 187, 187, 187, 187, 187, 187, 187, 187, 187, 187, 187, 187, 187,
};

static const int P5_Y[360] = {
    [0]         = 105, 105, 105, 106, 106, 106, 107, 107, 107, 108, 108, 108, 109, 109, 109, 110, 110, 110, 111, 111,
    [20]        = 111, 112, 112, 112, 113, 113, 113, 114, 114, 114, 115, 115, 115, 115, 116, 116, 116, 117, 117, 117,
    [40]        = 117, 118, 118, 118, 118, 119, 119, 119, 119, 120, 120, 120, 120, 120, 121, 121, 121, 121, 121, 122,
    [60]        = 122, 122, 122, 122, 122, 123, 123, 123, 123, 123, 123, 123, 124, 124, 124, 124, 124, 124, 124, 124,
    [80]        = 124, 124, 124, 124, 124, 124, 124, 124, 124, 124, 125, 124, 124, 124, 124, 124, 124, 124, 124, 124,
    [100]       = 124, 124, 124, 124, 124, 124, 124, 124, 124, 123, 123, 123, 123, 123, 123, 123, 122, 122, 122, 122,
    [120]       = 122, 122, 121, 121, 121, 121, 121, 120, 120, 120, 120, 120, 119, 119, 119, 119, 118, 118, 118, 118,
    [140]       = 117, 117, 117, 117, 116, 116, 116, 115, 115, 115, 115, 114, 114, 114, 113, 113, 113, 112, 112, 112,
    [160]       = 111, 111, 111, 110, 110, 110, 109, 109, 109, 108, 108, 108, 107, 107, 107, 106, 106, 106, 105, 105,
    [180]       = 105, 104, 104, 103, 103, 103, 102, 102, 102, 101, 101, 101, 100, 100, 100,  99,  99,  99,  98,  98,
    [200]       =  98,  97,  97,  97,  96,  96,  96,  95,  95,  95,  95,  94,  94,  94,  93,  93,  93,  92,  92,  92,
    [220]       =  92,  91,  91,  91,  91,  90,  90,  90,  90,  89,  89,  89,  89,  89,  88,  88,  88,  88,  88,  87,
    [240]       =  87,  87,  87,  87,  87,  86,  86,  86,  86,  86,  86,  86,  85,  85,  85,  85,  85,  85,  85,  85,
    [260]       =  85,  85,  85,  85,  85,  85,  85,  85,  85,  85,  85,  85,  85,  85,  85,  85,  85,  85,  85,  85,
    [280]       =  85,  85,  85,  85,  85,  85,  85,  85,  85,  86,  86,  86,  86,  86,  86,  86,  87,  87,  87,  87,
    [300]       =  87,  87,  88,  88,  88,  88,  88,  89,  89,  89,  89,  89,  90,  90,  90,  90,  91,  91,  91,  91,
    [320]       =  92,  92,  92,  92,  93,  93,  93,  94,  94,  94,  94,  95,  95,  95,  96,  96,  96,  97,  97,  97,
    [340]       =  98,  98,  98,  99,  99,  99, 100, 100, 100, 101, 101, 101, 102, 102, 102, 103, 103, 103, 104, 104,
};


void part5_draw(Part5 * p5, HistoryManager *h) {
    if (!EN_P5) return;
    //NOTE screen size 336x210
    if (I_CW) {
        p5->d ++;
        if (p5->d >= 360) p5->d = 0;
    } else {
        p5->d --;
        if (p5->d <= -1) p5->d = 359;
    }

    int x1 = P5_X[p5->d % 360];
    int y1 = P5_Y[p5->d % 360];

    Line l = {168, 105, x1, y1, I_COLOR};
    draw_line(&l);
    history_put(h, &l);
}
